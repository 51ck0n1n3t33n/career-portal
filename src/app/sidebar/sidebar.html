<aside class="side-bar" data-ng-click="sidebar.goBack();" role="navigation" aria-labelledby="main aside">
    <header>
        <label>{{::sidebar.configuration.text.sidebar.filtersHeader}}</label>

        <div class="button-container">
            <button data-ng-class="{'active': sidebar.SharedData.gridState === 'list-view'}" data-ng-click="sidebar.switchViewStyle('list');">
                <i class="bhi-list"></i>
            </button>
            <button class="fa-button" data-ng-class="{'active': sidebar.SharedData.gridState === 'grid-view'}" data-ng-click="sidebar.switchViewStyle('grid');">
                <i class="fa fa-th"></i>
            </button>
        </div>
    </header>
    <section>
        <div class="keyword-search">
            <label for="keyword"><i class="bhi-search"></i></label>
            <input class="search" type="text" data-ng-change="sidebar.searchOnDelay()" data-ng-model="sidebar.SearchService.searchParams.textSearch" id="keyword" name="keyword" placeholder="{{::sidebar.configuration.text.sidebar.searchPlaceholder}}"/>
            <button class="clear-filter" data-ng-show="sidebar.SearchService.searchParams.textSearch.length" data-ng-click="sidebar.clearSearchParamsAndLoadData('text');" name="clear-all">
                <i class="bhi-times"></i>
            </button>
        </div>

        <section class="filter-section" data-ng-class="{'active':!sidebar.locationLimitTo}">
            <h4>{{::sidebar.configuration.text.sidebar.locationHeader}}</h4>
            <span class="fill"></span>
            <button class="clear-filter" data-ng-show="sidebar.SearchService.searchParams.location.length" data-ng-click="sidebar.clearSearchParamsAndLoadData('location');" name="clear-all">
                <i class="bhi-times"></i> {{::sidebar.configuration.text.sidebar.clear}}
            </button>

            <div class="filter-item slide-down-item" data-ng-repeat="location in filteredLocations = (sidebar.locations | omitFilters:'location':sidebar.SearchService.searchParams.location) | limitTo:sidebar.locationLimitTo">
                <input type="checkbox" id="{{::location.address.city}},{{::location.address.state}}" data-ng-checked="sidebar.hasLocationFilter(location)" data-ng-click="sidebar.addOrRemoveLocation(location)">
                <label for="{{::location.address.city}},{{::location.address.state}}">{{::location.address.city}},&nbsp;{{::location.address.state}} ({{location.selected}})</label>
                <span>{{location.idCount}}</span>
            </div>

            <span class="show-more" data-ng-if="sidebar.locationLimitTo && filteredLocations.length > 8" data-ng-click="sidebar.updateLocationLimitTo(null)">
                 {{::sidebar.configuration.text.sidebar.showMore}}
            </span>
            <span class="show-more" data-ng-if="!sidebar.locationLimitTo" data-ng-click="sidebar.updateLocationLimitTo(8)">
                 {{::sidebar.configuration.text.sidebar.showLess}}
            </span>
        </section>
        <section class="filter-section" data-ng-class="{'active':!sidebar.categoryLimitTo}">
            <h4>{{::sidebar.configuration.text.sidebar.categoryHeader}}</h4>
            <span class="fill"></span>
            <button class="clear-filter" data-ng-show="sidebar.SearchService.searchParams.category.length" data-ng-click="sidebar.clearSearchParamsAndLoadData('category');" name="clear-all">
                <i class="bhi-times"></i> {{::sidebar.configuration.text.sidebar.clear}}
            </button>

            <div class="filter-item slide-down-item" data-ng-repeat="category in filteredCategories = (sidebar.categories | omitFilters:'category':sidebar.SearchService.searchParams.category) | limitTo:sidebar.categoryLimitTo">
                <input type="checkbox" id="{{::category.publishedCategory.id}}" data-ng-checked="sidebar.hasCategoryFilter(category)" data-ng-click="sidebar.addOrRemoveCategory(category)">
                <label for="{{::category.publishedCategory.id}}">{{::category.publishedCategory.name}}</label>
                <span>{{category.idCount}}</span>
            </div>

            <span class="show-more" data-ng-if="sidebar.categoryLimitTo && filteredCategories.length > 8" data-ng-click="sidebar.updateCategoryLimitTo(null)">
                {{::sidebar.configuration.text.sidebar.showMore}}
            </span>
            <span class="show-more" data-ng-if="!sidebar.categoryLimitTo" data-ng-click="sidebar.updateCategoryLimitTo(8)">
                 {{::sidebar.configuration.text.sidebar.showLess}}
            </span>
        </section>

        <section class="credits">
            <span class="powered-by">{{sidebar.configuration.text.sidebar.poweredBy}}</span>
            <h4 class="bullhorn">Bullh<span>o</span>rn</h4>
        </section>

        <button type="button" class="bhi-arrow-left" name="back-arrow"></button>
    </section>
</aside>